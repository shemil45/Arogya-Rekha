<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Provider Login</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="../../css/main.css" />
    <link rel="stylesheet" href="../../css/mobile.css" />
    
    <style>
      /* Dark Theme Styles */
      [data-theme="dark"] {
        --bg-primary: #1a1a1a;
        --bg-secondary: #2d2d2d;
        --bg-card: #3a3a3a;
        --text-primary: #ffffff;
        --text-secondary: #b0b0b0;
        --border-color: #4a4a4a;
        --shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
      }
      
      [data-theme="dark"] body {
        background-color: var(--bg-primary);
        color: var(--text-primary);
      }
      
      [data-theme="dark"] .card {
        background-color: var(--bg-card);
        border-color: var(--border-color);
        color: var(--text-primary);
      }
      
      [data-theme="dark"] .form-control {
        background-color: var(--bg-secondary);
        border-color: var(--border-color);
        color: var(--text-primary);
      }
      
      [data-theme="dark"] .form-control:focus {
        background-color: var(--bg-secondary);
        border-color: #4dabf7;
        color: var(--text-primary);
        box-shadow: 0 0 0 0.2rem rgba(77, 171, 247, 0.25);
      }
      
      [data-theme="dark"] .form-select {
        background-color: var(--bg-secondary);
        border-color: var(--border-color);
        color: var(--text-primary);
      }
      
      [data-theme="dark"] .form-select:focus {
        background-color: var(--bg-secondary);
        border-color: #4dabf7;
        color: var(--text-primary);
        box-shadow: 0 0 0 0.2rem rgba(77, 171, 247, 0.25);
      }
      
      [data-theme="dark"] .form-label {
        color: var(--text-primary);
      }
      
      [data-theme="dark"] .text-muted {
        color: var(--text-secondary) !important;
      }
      
      [data-theme="dark"] .btn-outline-secondary {
        color: var(--text-secondary);
        border-color: var(--border-color);
      }
      
      [data-theme="dark"] .btn-outline-secondary:hover {
        background-color: var(--border-color);
        color: var(--text-primary);
      }
      
      /* Light Theme (Default) */
      [data-theme="light"] {
        --bg-primary: #ffffff;
        --bg-secondary: #f8f9fa;
        --bg-card: #ffffff;
        --text-primary: #212529;
        --text-secondary: #6c757d;
        --border-color: #dee2e6;
        --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }
    </style>
  </head>
  <body>
    <div class="container py-4" style="max-width:560px;">
      <div class="d-flex justify-content-between align-items-center mb-3">
        <a href="../../index.html" class="text-decoration-none small">&larr; Home</a>
        <button class="btn btn-outline-secondary btn-sm" onclick="toggleTheme()">
          <span id="themeIcon">üåô</span> <span id="themeText">Dark</span>
        </button>
      </div>
      <h1 class="h4 fw-bold mt-2">Healthcare Provider Login</h1>
      <p class="text-muted small">Demo authentication for SIH prototype</p>

      <form id="loginForm" class="card border-0 shadow-sm p-3 mobile-card" novalidate>
        <div class="mb-3">
          <label class="form-label">Email</label>
          <input type="email" class="form-control" name="email" required />
          <div class="invalid-feedback">Valid email required</div>
        </div>
        <div class="mb-3">
          <label class="form-label">Password</label>
          <input type="password" class="form-control" name="password" required />
          <div class="invalid-feedback">Password required</div>
        </div>
        <div class="mb-3">
          <label class="form-label">Role</label>
          <select class="form-select" name="role" required>
            <option value="" selected disabled>Select role</option>
            <option>Doctor</option>
            <option>Nurse</option>
            <option>Health Worker</option>
          </select>
          <div class="invalid-feedback">Select a role</div>
        </div>
        <div class="d-grid">
          <button class="btn btn-success btn-lg" type="submit">Login</button>
        </div>
      </form>

      <div class="app-toast" role="status" aria-live="polite"></div>
    </div>

    <script src="../../js/main.js"></script>
    <script>
      const form = document.getElementById('loginForm');
      form.addEventListener('submit', (e) => {
        e.preventDefault();
        if (!form.checkValidity()) { form.classList.add('was-validated'); App.showToast('Please complete the form', 'error'); return; }
        const fd = new FormData(form);
        localStorage.setItem(App.STORAGE_KEYS.providerRole, fd.get('role'));
        App.showToast('Login successful');
        setTimeout(()=>{ window.location.href = './dashboard.html'; }, 700);
      });
      
      // Theme toggle functionality
      function toggleTheme() {
        const currentTheme = document.documentElement.getAttribute('data-theme');
        const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
        
        // Set new theme
        document.documentElement.setAttribute('data-theme', newTheme);
        
        // Update button text and icon
        const themeIcon = document.getElementById('themeIcon');
        const themeText = document.getElementById('themeText');
        
        if (newTheme === 'dark') {
          themeIcon.textContent = '‚òÄÔ∏è';
          themeText.textContent = 'Light';
        } else {
          themeIcon.textContent = 'üåô';
          themeText.textContent = 'Dark';
        }
        
        // Save theme preference
        localStorage.setItem('theme', newTheme);
      }
      
      // Initialize theme on page load
      function initializeTheme() {
        const savedTheme = localStorage.getItem('theme') || 'light';
        document.documentElement.setAttribute('data-theme', savedTheme);
        
        // Update button to show current theme
        const themeIcon = document.getElementById('themeIcon');
        const themeText = document.getElementById('themeText');
        
        if (savedTheme === 'dark') {
          themeIcon.textContent = '‚òÄÔ∏è';
          themeText.textContent = 'Light';
        } else {
          themeIcon.textContent = 'üåô';
          themeText.textContent = 'Dark';
        }
      }
      
      // Initialize theme when page loads
      document.addEventListener('DOMContentLoaded', initializeTheme);
    </script>
  </body>
  </html>

